create database trig1;

use trig1;

create table lib_book(bid int(20),bname varchar(50),qty int(10));

insert into lib_book(bid,bname,qty)values(1,"DBMS",10);

insert into lib_book(bid,bname,qty)values(2,"DSA",20);

insert into lib_book(bid,bname,qty)values(3,"CNS",30);

select * from lib_book;

create table lib_Audit(bid int(20),bname varchar(50),qty int(10));

drop trigger if exists Make_audit1;

drop trigger if exists Make_audit1;
   ->
   -> delimiter //

CREATE TRIGGER Make_audit1
   ->   AFTER DELETE ON lib_book
   ->   FOR EACH ROW
   -> BEGIN
   ->   INSERT INTO lib_Audit (bid, bname, qty)
   ->   VALUES (OLD.bid, OLD.bname,OLD.qty);
   -> END;
   -> //

delete from lib_book where bid=2;
   -> //

select * from lib_Audit;
   -> //

drop trigger if exists Make_audit2;
   ->
   -> delimiter //

CREATE TRIGGER Make_audit2
   ->   AFTER UPDATE ON lib_book
   ->   FOR EACH ROW
   -> BEGIN
   ->   INSERT INTO lib_Audit (bid, bname, qty)
   ->   VALUES (OLD.bid, OLD.bname,OLD.qty);
   -> END;
   -> //

delimiter ;
update lib_book SET bid=2 where bid=3;

Rows matched: 1  Changed: 1  Warnings: 0
 
select *from lib_book;

select *from lib_Audit;
